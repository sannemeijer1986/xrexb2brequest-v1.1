<!DOCTYPE html>
<html lang="en">

<head>
    <script src="auth/auth-gate.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>XREX Pay - Profile & Payment methods</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&family=Sora:wght@400;600;700&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="css/main.css?v=20251108" />
    <link rel="icon" href="assets/favicons/xrex-favicon-16x16.png" sizes="16x16" type="image/png" />
</head>

<body class="profile-payment-page">
    <header class="site-header">
        <div class="container header__content">
            <a class="brand" href="index.html" aria-label="XREX Pay">
                <img class="brand__img" src="assets/logo_xrexpay.svg" alt="XREX Pay" />
            </a>
            <div class="header__spacer"></div>
            <div class="header__actions">
                <a class="circle-icon" href="https://intercom.help/xrex-sg/en/" target="_blank"
                    rel="noopener noreferrer" title="Support">
                    <img src="assets/icon_support.svg" alt="support" width="20" height="20" />
                </a>
                <a class="account-chip" href="index.html">
                    <span class="chip-avatar"><img src="assets/logo_agp.svg" alt="C" /></span>
                    <span class="chip-name">AGP Technology</span>
                    <img class="chevron" src="assets/icon_chevron_right.svg" alt="more" width="20" height="20" />
                </a>
            </div>
        </div>
    </header>

    <main class="page page--profile-payment">
        <div class="container profile-payment__container">
            <div class="profile-payment__header">
                <h1 class="profile-payment__title">Profile & Payment methods</h1>
                <a href="#" class="profile-payment__back">Back to payment request</a>
            </div>

            <div class="profile-payment__grid">
                <!-- Profile card -->
                <article class="profile-card">
                    <div class="profile-card__icon">
                        <img src="assets/Icon_pp_counterparty.svg" alt="" width="32" height="32" />
                    </div>
                    <div class="profile-card__label">Company legal name</div>
                    <h2 class="profile-card__name">Beta Manufacturing Co. Ltd</h2>
                    <dl class="profile-card__fields">
                        <div class="profile-card__field">
                            <dt>Registration date:</dt>
                            <dd>30/11/2025</dd>
                        </div>
                        <div class="profile-card__field">
                            <dt>Registration number:</dt>
                            <dd>202018765Z</dd>
                        </div>
                        <div class="profile-card__field">
                            <dt>Country of registration:</dt>
                            <dd>Singapore</dd>
                        </div>
                        <div class="profile-card__field">
                            <dt>Registered address:</dt>
                            <dd>6 Battery Road, Singapore 049909</dd>
                        </div>
                        <div class="profile-card__field">
                            <dt>Country of operation:</dt>
                            <dd>Singapore</dd>
                        </div>
                        <div class="profile-card__field">
                            <dt>Contact email address:</dt>
                            <dd>abc1234@gmail.com</dd>
                        </div>
                    </dl>
                </article>

                <!-- Payment methods card -->
                <article class="payment-methods-card">
                    <div class="payment-methods-card__header">
                        <div class="payment-methods-card__icon">
                            <img src="assets/Icon_pp_paymentmethod.svg" alt="" width="20" height="20" />
                        </div>
                        <h2 class="payment-methods-card__title">Payment methods</h2>
                    </div>
                    <div class="payment-methods-card__section">
                        <span class="payment-methods-card__section-label">Stablecoin payments</span>
                        <div class="payment-methods-card__list">
                            <div class="wallet-entry" id="walletEntry" role="button" tabindex="0" aria-label="Open verify email">
                                <div class="wallet-entry__icon">
                                    <img src="assets/Icon_pp_wallet.svg" alt="" width="24" height="24" />
                                </div>
                                <div class="wallet-entry__content">
                                    <div class="wallet-entry__title">Wallet account</div>
                                    <div class="wallet-entry__detail">abc1234@gmail.com</div>
                                </div>
                                <button type="button" class="wallet-entry__menu" id="walletMoreBtn" aria-label="More options" aria-haspopup="menu" aria-expanded="false">
                                    <img src="assets/icon_pp_more.svg" alt="" width="24" height="24" />
                                </button>
                                <div class="wallet-entry__dropdown" id="walletMoreMenu" role="menu" aria-hidden="true">
                                    <a href="#" id="walletViewSelfCustody" role="menuitem">View your self-custody wallet</a>
                                    <a href="#" role="menuitem">How it works</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </article>
            </div>
        </div>
    </main>

    <div class="pp-modal pp-modal--get-code" id="requestOtpModal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="requestOtpTitle">
        <div class="pp-modal__dialog">
            <div class="pp-modal__header">
                <h2 id="requestOtpTitle">Log in to your wallet</h2>
                <button type="button" id="requestOtpClose" aria-label="Close"><img src="assets/icon_pp_close.svg" width="24" height="24" alt="" /></button>
            </div>
            <div class="pp-modal__body">
                <p class="pp-modal__lead">
                    Verify your email to continue. Fireblocks Dynamic will send a one-time verification code to <span>abc1234@gmail.com</span>
                </p>
                <div class="pp-modal__get-code-row">
                    <button type="button" class="pp-modal__btn pp-modal__btn--primary" id="getVerificationCodeBtn">Get verification code</button>
                    <div class="pp-modal__brand"><img src="assets/logo_pp_dynamic.svg" alt="dynamic by Fireblocks" /></div>
                </div>
                <div class="pp-modal__get-code-divider"></div>
            </div>
            <div class="pp-modal__footer">
                <button type="button" class="pp-modal__btn" id="requestOtpCancel">Cancel</button>
            </div>
        </div>
    </div>

    <div class="pp-modal" id="verifyEmailModal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="verifyEmailTitle">
        <div class="pp-modal__dialog">
            <div class="pp-modal__header">
                <h2 id="verifyEmailTitle">Log in to your wallet</h2>
                <button type="button" id="verifyEmailClose" aria-label="Close"><img src="assets/icon_pp_close.svg" width="24" height="24" alt="" /></button>
            </div>
            <div class="pp-modal__body">
                <p class="pp-modal__lead">
                    Enter the verification code sent by Fireblocks Dynamic to <span>abc1234@gmail.com</span>
                </p>

                <div class="pp-modal__brand"><img src="assets/logo_pp_dynamic.svg" alt="dynamic by Fireblocks" /></div>

                <label class="pp-modal__label" for="verifyCodeInput">Verification code</label>
                <input id="verifyCodeInput" type="text" placeholder="Enter code from your email" />
                <p class="pp-modal__meta">Didn’t receive the code? Resend in 200s</p>
                <p class="pp-modal__submeta">If it’s missing, check your spam or junk folder</p>
            </div>
            <div class="pp-modal__footer">
                <button type="button" class="pp-modal__btn" id="verifyEmailOkay">Cancel</button>
            </div>
            <div class="pp-modal__loading" id="verifyEmailLoading" aria-hidden="true">
                <div class="pp-modal__spinner" aria-hidden="true"></div>
                <p>Loading...</p>
            </div>
        </div>
    </div>

    <div class="pp-loading-modal" id="walletLoadingModal" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Logging in">
        <div class="pp-loading-modal__dialog">
            <div class="pp-loading-modal__logos">
                <div class="pp-loading-modal__logo_wrapper"><div class="pp-loading-modal__logo"><img src="assets/loading_left.svg" alt="XREX Pay" /></div></div>
                <div class="pp-loading-modal__progress" aria-hidden="true">
                    <span class="pp-loading-modal__progress-bar"></span>
                    <span class="pp-loading-modal__progress-bar"></span>
                    <span class="pp-loading-modal__progress-bar"></span>
                    <span class="pp-loading-modal__progress-bar"></span>
                    <span class="pp-loading-modal__progress-bar"></span>
                </div>
                <div class="pp-loading-modal__logo_wrapper"><div class="pp-loading-modal__logo"><img src="assets/loading_rigth.svg" alt="dynamic by Fireblocks" /></div></div>
            </div>
            <p class="pp-loading-modal__message">Logging in to your wallet...</p>
        </div>
    </div>

    <footer class="site-footer">
        <div class="footer__inner">
            <div class="footer__copy">© XREX Pay Limited 2025</div>
            <div class="footer__links">
                <a href="https://intercom.help/xrex-sg/en/" target="_blank" rel="noopener noreferrer">Support</a>
                <a href="https://info.xrex.sg/doc" target="_blank" rel="noopener noreferrer">Terms of Use</a>
                <a href="https://info.xrex.sg/doc" target="_blank" rel="noopener noreferrer">Privacy Policy</a>
            </div>
        </div>
    </footer>
    <script>
        (function () {
            const walletEntry = document.getElementById("walletEntry");
            const moreBtn = document.getElementById("walletMoreBtn");
            const moreMenu = document.getElementById("walletMoreMenu");
            const requestOtpModal = document.getElementById("requestOtpModal");
            const modal = document.getElementById("verifyEmailModal");
            const closeBtn = document.getElementById("verifyEmailClose");
            const okayBtn = document.getElementById("verifyEmailOkay");
            const requestOtpClose = document.getElementById("requestOtpClose");
            const requestOtpCancel = document.getElementById("requestOtpCancel");
            const getVerificationCodeBtn = document.getElementById("getVerificationCodeBtn");
            const viewSelfCustodyItem = document.getElementById("walletViewSelfCustody");
            const verifyInput = document.getElementById("verifyCodeInput");
            const loadingEl = document.getElementById("verifyEmailLoading");
            const walletLoadingModal = document.getElementById("walletLoadingModal");
            let verifyFlowRunning = false;

            if (!walletEntry || !moreBtn || !moreMenu || !modal) return;

            function lockBackgroundScroll() {
                var y = window.scrollY || window.pageYOffset || 0;
                document.documentElement.style.overflow = "hidden";
                document.body.dataset.scrollY = String(y);
                document.body.style.position = "fixed";
                document.body.style.width = "100%";
                document.body.style.left = "0";
                document.body.style.right = "0";
                document.body.style.top = "-" + y + "px";
            }

            function unlockBackgroundScroll() {
                var y = parseInt(document.body.dataset.scrollY || "0", 10) || 0;
                document.documentElement.style.overflow = "";
                document.body.style.position = "";
                document.body.style.width = "";
                document.body.style.left = "";
                document.body.style.right = "";
                document.body.style.top = "";
                delete document.body.dataset.scrollY;
                window.scrollTo(0, y);
            }

            function openModal() {
                if (requestOtpModal) {
                    requestOtpModal.setAttribute("aria-hidden", "false");
                    lockBackgroundScroll();
                } else {
                    openVerifyModal();
                }
            }

            function closeRequestOtpModal() {
                if (requestOtpModal) requestOtpModal.setAttribute("aria-hidden", "true");
                unlockBackgroundScroll();
            }

            function openVerifyModal() {
                if (requestOtpModal) requestOtpModal.setAttribute("aria-hidden", "true");
                if (verifyInput) {
                    verifyInput.value = "";
                    verifyInput.readOnly = false;
                }
                modal.setAttribute("aria-hidden", "false");
                lockBackgroundScroll();
            }

            function closeModal() {
                modal.setAttribute("aria-hidden", "true");
                if (loadingEl) loadingEl.setAttribute("aria-hidden", "true");
                if (walletLoadingModal) walletLoadingModal.setAttribute("aria-hidden", "true");
                verifyFlowRunning = false;
                if (verifyInput) verifyInput.readOnly = false;
                unlockBackgroundScroll();
            }

            function openMenu() {
                moreMenu.classList.add("is-open");
                moreMenu.setAttribute("aria-hidden", "false");
                moreBtn.setAttribute("aria-expanded", "true");
            }

            function closeMenu() {
                moreMenu.classList.remove("is-open");
                moreMenu.setAttribute("aria-hidden", "true");
                moreBtn.setAttribute("aria-expanded", "false");
            }

            function toggleMenu() {
                if (moreMenu.classList.contains("is-open")) closeMenu();
                else openMenu();
            }

            walletEntry.addEventListener("click", openModal);
            walletEntry.addEventListener("keydown", function (e) {
                if (e.key === "Enter" || e.key === " ") {
                    e.preventDefault();
                    openModal();
                }
            });

            moreBtn.addEventListener("click", function (e) {
                e.stopPropagation();
                e.preventDefault();
                toggleMenu();
            });

            moreBtn.addEventListener("mouseenter", function () {
                walletEntry.classList.add("is-menu-hover");
            });
            moreBtn.addEventListener("mouseleave", function () {
                walletEntry.classList.remove("is-menu-hover");
            });

            moreMenu.addEventListener("click", function (e) {
                e.stopPropagation();
            });
            moreMenu.addEventListener("mouseenter", function () {
                walletEntry.classList.add("is-menu-hover");
            });
            moreMenu.addEventListener("mouseleave", function () {
                walletEntry.classList.remove("is-menu-hover");
            });

            moreMenu.querySelectorAll("a").forEach(function (item) {
                item.addEventListener("click", function (e) {
                    e.preventDefault();
                    closeMenu();
                });
            });

            if (viewSelfCustodyItem) {
                viewSelfCustodyItem.addEventListener("click", function () {
                    openModal();
                });
            }

            document.addEventListener("click", function () {
                closeMenu();
            });

            if (requestOtpModal) {
                requestOtpModal.addEventListener("click", function (e) {
                    if (e.target === requestOtpModal) closeRequestOtpModal();
                });
            }
            if (requestOtpClose) requestOtpClose.addEventListener("click", closeRequestOtpModal);
            if (requestOtpCancel) requestOtpCancel.addEventListener("click", closeRequestOtpModal);
            if (getVerificationCodeBtn) {
                getVerificationCodeBtn.addEventListener("click", function () {
                    if (requestOtpModal) requestOtpModal.setAttribute("aria-hidden", "true");
                    openVerifyModal();
                });
            }

            modal.addEventListener("click", function (e) {
                if (e.target === modal) closeModal();
            });

            function runVerifyInputFlow() {
                if (!verifyInput || !walletLoadingModal || verifyFlowRunning) return;
                verifyFlowRunning = true;
                verifyInput.value = "123456";
                verifyInput.readOnly = true;

                setTimeout(function () {
                    modal.setAttribute("aria-hidden", "true");
                    if (loadingEl) loadingEl.setAttribute("aria-hidden", "true");
                    walletLoadingModal.setAttribute("aria-hidden", "false");
                    setTimeout(function () {
                        walletLoadingModal.setAttribute("aria-hidden", "true");
                        verifyFlowRunning = false;
                        unlockBackgroundScroll();
                    }, 900);
                }, 500);
            }

            if (verifyInput) {
                verifyInput.addEventListener("focus", runVerifyInputFlow);
                verifyInput.addEventListener("input", function () {
                    if (verifyInput.readOnly) verifyInput.value = "123456";
                });
                verifyInput.addEventListener("keydown", function (e) {
                    if (verifyInput.readOnly) e.preventDefault();
                });
            }

            if (closeBtn) closeBtn.addEventListener("click", closeModal);
            if (okayBtn) okayBtn.addEventListener("click", closeModal);
        })();
    </script>
</body>

</html>
